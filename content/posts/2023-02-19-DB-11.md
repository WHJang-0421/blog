---
title:  "오라클 DB 11: 제약 조건"
author: "Woohyuk Jang"
draft: false

date: "2023-02-19"
description: ""
categories:
  - cs/db
tags:
  - Blog
---
### 오라클 DB #11: 제약 조건



이 글은 [오라클로 배우는 데이터베이스 입문](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=171630125) 14장을 읽고 정리한 것이다.



1. 데이터 무결성 (Data Integrity)



* 데이터의 정확성, 일관성, 유효성이 항상 유지되는 것을 의미

* 개체 무결성 (domain integrity): 데이터의 행을 유일하게 식별할 수 있는 NULL이 아니고 중복되지 않는 기본키가 존재해야 함.

* 영역 무결성 (domain integrity): 열에 저장되는 값이 자료형, NULL 여부 같은 조건들에서 적절한 범위를 만족해야 함.

* 참조 무결성(referential integrity): 외래키 값은 참조 테이블의 기본키로 존재해야 함.



2\. 제약 조건 (Constraint)



* 제약 조건은 데이터 무결성을 지키기 위해 사용된다.

* 제약 조건(constraint)는 테이블의 데이터를 제약하는 특수 규칙이다.

* 제약 조건은 테이블의 열에 지정하며, DDL을 이용해 설정한다.



3\. 제약 조건 확인



```

SELECT OWNER, CONSTRAINT_NAME, CONSTRAINT_TYPE, TABLE_NAME

FROM USER_CONSTRAINTS; -- 제약조건을 담은 데이터 사전

```



* CONSTRAINT\_TYPE은 제약 조건의 종류를 나타내는 열이다. C: check, not null. U: unique, P: primary key, R: referential



4\. NOT NULL



```

CREATE TABLE EXAMPLE_USER( -- 제약조건은 보통 데이터베이스 설계 시점 (생성) 때 결정

  USER_ID VARCHAR2(20) NOT NULL, -- 이 방식은 inline/column-level 제약 조건 정의

  USER_PWD VARCHAR2(20) CONSTRAINT USER_PW_NN NOT NULL, -- 제약 조건 이름 지정

  NAME VARCHAR2(10)

);



ALTER TABLE EXAMPLE_USER

MODIFY(NAME CONSTRAINT USER_NAME_NN NOT NULL);



ALTER TABLE EXAMPLE_USER

RENAME CONSTRAINT USER_PW_NN TO USER_PWD_NN;



ALTER TABLE EXAMPLE_USER

DROP CONSTRAINT USER_PWD_NN;

```



* 위의 예시에서도 볼 수 있듯이 생성 시 제약조건 이름을 지정해야 나중에 변경/삭제가 용이하다. 일반적인 이름은 `테이블이름_열이름_제약조건이름` 인듯.

* 제약 조건은 기본적으로 테이블에 속한 것이라고 생각하면 편하다.

* 제약 조건 변경시 조건에 맞지 않는 데이터가 있으면 변경에 실패한다. 이때는 제약 조건을 지키도록 데이터를 먼저 수정해야 한다.



5\. UNIQUE



* 중복되지 않는다는 뜻이지만, NULL은 중복으로 치지 않는다. NULL = NULL의 결과는 NULL이기 때문이다. (? = ?의 결과는 ?인것 처럼)

* NOT NULL과 생성, 수정, 삭제의 과정은 동일하다.

* 다만, NOT NULL을 제외한 제약 조건들은 CREATE문에서 아웃 오브 라인 (out-of-line) 또는 테이블 레벨 (table level) 제약 조건 정의가 가능하다.



```

CREATE TABLE USER_EXAMPLE(

  USER_ID VARCHAR2(20),

  USER_PWD VARCHAR2(30),

  PRIMARY KEY (USER_ID),

  CONSTRAINT PWD_U UNIQUE(USER_PWD)

)

```



6\. PRIMARY KEY



* NOT NULL이면서 UNIQUE

* 자동으로 해당 열에 제약조건과 같은 이름의 인덱스가 생성된다. 이를 USER\_INDEXES 데이터 사전에서 확인해보자.



7\. FOREIGN KEY



* 다른 테이블의 기본키를 참조한다는 의미

* 참조 대상 테이블을 부모, 참조하는 테이블을 자식이라고 한다.

* 자식의 외부키 값은 반드시 부모 테이블의 기본키로 존재해야 한다. 다만 외부키 값이 NULL일수는 있다.

* REFERENCES 키워드를 이용하여 정의한다.



```

CREATE TABLE USER_EXAMPLE(

  USER_ID VARCHAR(20),

  USER_PWD NUMBER(10),

  LOCATION_ID NUMBER(10),

  GROUP_ID NUMBER(10) CONSTRAINT GROUP_FOREIGN REFERENCES GROUP_EXAMPLE -- 인라인

  CONSTRAINT LOCATION_FOREIGN FOREIGN KEY(LOCATION_ID) REFERENCES LOC_EXAMPLE

  -- 아웃 오브 라인

);

```



* 자식의 레코드가 부모의 기본키를 참조하고 있을때, 부모의 레코드를 삭제하면 오류가 발생한다. (무결성 제약조건에 위배)

* 참조 무결성을 지키려면 먼저 자식 레코드를 변경/삭제한 후 부모 레코드를 삭제해야 한다. 하지만 이는 비효율적이기 때문에 자식 테이블을 정의할 때부터 부모 레코드 삭제시 어떻게 할지를 정의할 수 있다.



```

-- 위의 예시를 변경해본다.

CREATE TABLE USER_EXAMPLE(

  USER_ID VARCHAR(20),

  USER_PWD NUMBER(10),

  LOCATION_ID NUMBER(10),

  GROUP_ID NUMBER(10)

    CONSTRAINT GROUP_FOREIGN

    REFERENCES GROUP_EXAMPLE 

    ON DELETE CASCADE -- 부모 레코드를 삭제하면 이 레코드도 삭제

  CONSTRAINT LOCATION_FOREIGN 

    FOREIGN KEY(LOCATION_ID) 

    REFERENCES LOC_EXAMPLE 

    ON DELETE SET NULL

);

```



8\. CHECK



* CHECK 제약조건은 열의 데이터가 특정 조건을 만족하는지 검사한다.



```

CREATE TABLE USER_EXAMPLE(

  USER_ID VARCHAR2(20) CONSTRAINT ID_PK PRIMARY KEY,

  USER_PWD VARCHAR2(30) CONSTRAINT PW_LENGTH CHECK (LENGTH(USER_PWD) > 5)

);

```



9\. DEFAULT



* 제약 조건은 아니지만 말 그대로 기본값을 지정한다.



```

CREATE TABLE USER_EXAMPLE(

  USER_ID VARCHAR2(20) CONSTRAINT ID_PK PRIMARY KEY,

  USER_PWD VARCHAR2(30) CONSTRAINT PW_LENGTH CHECK (LENGTH(USER_PWD) > 5),

  NAME VARCHAR2(20) DEFAULT 'NONAME'

);

```



* DEFAULT를 정의하면 열 이름을 생략한 INSERT INTO 문에서 기본값이 들어간다. (그러니까 모든 열의 DEFAULT 값의 기본값은 NULL인 것이다)



10\. 제약 조건의 (비)활성화



* 개발 과정, 테스트 과정, 배포 과정에서 필요한 제약조건이 다를 수 있다. 이때 제약 조건을 활성화/비활성화할 수 있다.



```

ALTER TABLE 테이블이름

DISABLE [NOVALIDATE / VALIDATE] CONSTRAINT 제약조건이름; -- 비활성화



ALTER TABLE 테이블이름

ENABLE [NOVALIDATE/VALIDATE] CONSTRAINT 제약조건이름; -- 활성화

```



* VALIDATE는 현재 존재하는 데이터가 제약 조건을 만족하는지 확인하고, 위배되면 (비)활성화하지 않는다. NOVALIDATE는 제약 조건에 위배되는 데이터가 있어도 그냥 (비)활성화한다.



11\. 참고 자료 / 더 깊게 파보고 싶다면…



[**Do it! 오라클로 배우는 데이터베이스 입문**\

*현업 프로그래머이자 강사인 저자가 수많은 프로젝트 경험을 살려 실무에서 진짜 필요한 기본기를 중심으로 내용을 구성했다. 본문 내용은 비전공자도 알기 쉽게 도해와 비유로 풀어 썼고 427개의 예제는 실무에서 ...*&#x77;ww.aladin.co.kr](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=171630125 "https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=171630125")[](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=171630125)



[**\[관계형 데이터베이스\] - 무결성 (Integrity)**\

*1. 데이터의 무결성 데이터의 무결성은 데이터의 정확성, 일관성, 유효성이 유지되는 것을 말한다. 데이터의 무결성을 유지하는 것은 데이터베이스 관리시스템 (DBMS)의 중요한 기능이며, 주로 데이터에 적용되는…*&#x75;ntitledtblog.tistory.com](https://untitledtblog.tistory.com/123 "https://untitledtblog.tistory.com/123")[](https://untitledtblog.tistory.com/123)



[**\[ORACLE\] :: 검증 (VALIDATE)**\

*검증 (VALIDATE) :: 특정 컬럼에 제약조건 추가시 해당 제약조건에 위반되는 데이터가 존재하는지 확인하는 작업 :: 기본적으로는 제약조건 위반 데이터가 있다면 생성할 수 없다. :: 단, 비활성화 상태에서는…*&#x68;ikr90.tistory.com](https://hikr90.tistory.com/209 "https://hikr90.tistory.com/209")[](https://hikr90.tistory.com/209)



By [Woohyuk Jang](https://medium.com/@morrranii) on [February 19, 2023](https://medium.com/p/ec0c2893156c).

Exported from [Medium](https://medium.com) on August 26, 2025.
