---
title:  "오라클 DB 6: 서브쿼리"
author: "Woohyuk Jang"
draft: false

date: "2023-02-17"
description: ""
categories:
  - cs/db
tags:
  - Blog
---
### 오라클 DB #6: 서브쿼리



이 글은 [오라클로 배우는 데이터베이스 입문](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=171630125) 9장을 읽고 정리한 것이다.



이제 드디어 책에서 데이터 조회와 관련 부분을 끝냈다! Data Query Language 부분을 끝낸 것이다.



1. 서브쿼리란?



* SQL이 Structured Query Language라는 것을 다시 기억하자. 쿼리란 데이터베이스에 정보를 요청하는 것이다. 어떤 쿼리에서는 필요한 데이터를 조회하고 위해 SQL 문 내에 SELECT문을 사용한다. 이때 실행하려는 쿼리는 main query, 내부에서 사용하는 쿼리는 subquery라고 한다.

* 서브쿼리는 괄호 안에 사용한다.



2\. 단일행 서브쿼리 (single-row subquery)



실행 결과가 하나의 행으로 나오는 서브쿼리. >, >=, =, <> 등의 단일행 연산자로 비교한다.



```

SELECT T1.COL1, T2.COL2

FROM T1

  NATURAL JOIN T2

WHERE

  T1.COL1 > (SELECT AVG(COL2) FROM T2)

```



3\. 다중행 서브쿼리 (multiple-row subquery)



실행 결과가 여러개의 행으로 나오는 서브쿼리. 아래에 소개할 다중행 연산자로 비교한다.



* A IN B: A가 B의 데이터중 하나와 일치한다

* A 연산 ANY B, A 연산 SOME B: B의 데이터 중 하나에 대해 연산자가 성립한다. 예를 들어 A =ANY B는 A IN B와 동일.

* A 연산 ALL B: B의 모든 데이터에 대해 연산이 성립한다.

* EXISTS A: A에 NULL이 아닌 값이 하나 이상 존재한다.



```

SELECT *

FROM TABLE1

WHERE EXISTS (SELECT COL1

              FROM TABLE2

              WHERE COL2 = 30);

```



4\. 다중열 서브쿼리 (multiple-column subquery)



괄호로 묶은 데이터를 사용하면 된다.



```

SELECT *

FROM TABLE1

WHERE (COL1, COL2) IN (SELECT COLA, MAX(COLB)

                       FROM TABLE2

                       GROUP BY COLA);

```



5\. 인라인 뷰 (inline view)



* FROM절에 사용하는 서브쿼리를 인라인 뷰라고 한다.



```

SELECT T1.COL1, T1.COL2

FROM (SELECT * FROM EX_TABLE WHERE COL1=1) AS T1;

```



* 서브쿼리가 복잡해지면 인라인 뷰를 SELECT문 위에 명시할 수 있다. (WITH 절)



```

WITH (SELECT * FROM EX_TABLE WHERE COL1=1) AS T1

SELECT T1.COL1, T1.COL2

FROM T1;

```



6\. 스칼라 서브쿼리 (scalar subquery)



* SELECT 절에 사용하는 서브쿼리를 스칼라 서브쿼리라고 한다. 당연하지만 단일행 서브쿼리만 가능하다.



```

SELECT COL1, COL2,

    (SELECT COLA FROM TABLE2 WHERE COLB = COL1) AS EXT_COLA

FROM TABLE1;

```



7\. 참고자료



[**Do it! 오라클로 배우는 데이터베이스 입문**\

*현업 프로그래머이자 강사인 저자가 수많은 프로젝트 경험을 살려 실무에서 진짜 필요한 기본기를 중심으로 내용을 구성했다. 본문 내용은 비전공자도 알기 쉽게 도해와 비유로 풀어 썼고 427개의 예제는 실무에서 ...*&#x77;ww.aladin.co.kr](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=171630125 "https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=171630125")[](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=171630125)



By [Woohyuk Jang](https://medium.com/@morrranii) on [February 17, 2023](https://medium.com/p/6295e5da6797).

Exported from [Medium](https://medium.com) on August 26, 2025.
