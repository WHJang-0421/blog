---
title:  "모든 일치하는 이미지 찾기 — OpenCV와 게임 컴퓨터 비전 2"
author: "Woohyuk Jang"
draft: false

date: "2023-08-30"
description: ""
categories:
  - cs/ai
tags:
  - Blog
---
### 모든 일치하는 이미지 찾기 — OpenCV와 게임 컴퓨터 비전 #2



저번 포스트에서는 template matching을 한번 해보았다. 오늘은 모든 일치하는 이미지를 찾으려고 한다.



*이 글은&#x20;*<https://youtu.be/ffRYijPR8pk?feature=shared>*를 참고하여 작성했으며, 주로 영상의 번역과 구현 과정에서 나의 경험을 담고 있다.*



1. 오늘 뭘 할까?



사실 오늘 하는게 저번 글과 거의 다르지 않다.



![](https://cdn-images-1.medium.com/max/800/1*OUaHN3ttKN3oqklvy-wg6Q.jpeg)



template image를 찾을 이미지



![](https://cdn-images-1.medium.com/max/800/1*j27gVtVmVx2YSCtLpiNPwg.jpeg)



template image



가 주어지면 **모든** 일치하는 곳을 찾는 프로그램을 만들기이다.



![](https://cdn-images-1.medium.com/max/800/1*6MqCwLnluA6ilCTJLQDuLA.jpeg)



이렇게



2\. 코드



```

import cv2 as cv

import numpy as np



### just do the same thing as pyautogui.locateAllOnScreen()



### load images

arena_img = cv.imread("C:/Temp/2023/game-auto/images/royale-arena.jpg", cv.IMREAD_REDUCED_COLOR_2)

tower_img = cv.imread("C:/Temp/2023/game-auto/images/royale-crowntower.jpg", cv.IMREAD_REDUCED_COLOR_2)

# print(arena_img.dtype)

# print(arena_img.shape)



### template matching

result = cv.matchTemplate(arena_img, tower_img, cv.TM_CCOEFF_NORMED)

threshold = 0.35

locations = list(zip(*np.where(result >= threshold)[::-1]))

print(len(locations), locations)



### draw rectangles for matches

if locations:

    print('found tower.')



    tower_w = tower_img.shape[1]

    tower_h = tower_img.shape[0]

    line_color = (0, 255, 0)

    line_type = cv.LINE_4



    for loc in locations:

        top_left = loc

        bottom_right = (loc[0] + tower_w, loc[1] + tower_h)



        cv.rectangle(arena_img, top_left, bottom_right, line_color, line_type)



    cv.imshow('Matches', arena_img)

    cv.waitKey()

    # cv.imwrite('images/royale-findalltowers.jpg', arena_img)

else:

    print('tower not found.')

```



저번과 코드가 거의 비슷해서 딱히 설명은 필요 없을 듯



3\. 참고자료



<https://youtu.be/ffRYijPR8pk?feature=shared>



By [Woohyuk Jang](https://medium.com/@morrranii) on [August 30, 2023](https://medium.com/p/e6283f8623a5).

Exported from [Medium](https://medium.com) on August 26, 2025.
